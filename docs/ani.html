<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DATUM — pure SVG animations (no libraries)</title>
  <style>
    :root { --bg:#0b0f14; --fg:#e6f1ff; --accent:#49F2CC; --accent2:#FFE202; }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{min-height:100%;display:grid;grid-template-rows:1fr auto}
    #stage{display:grid;place-items:center;padding:32px 16px 8px;overflow:hidden;height:clamp(360px,60vh,600px)}
    .controls{display:flex;gap:12px;padding:16px;border-top:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.02);backdrop-filter:blur(6px)}
    select,button{appearance:none;background:#141b22;color:var(--fg);border:1px solid rgba(255,255,255,.12);padding:10px 14px;border-radius:12px;font-size:14px;cursor:pointer}
    button:hover{filter:brightness(1.1)}
    .note{margin-left:auto;opacity:.75;font-size:12px}
    #svgRoot{width:min(92vw,1100px);height:min(52vh,420px)}
    /* optional blur filter for fade */
    svg defs filter feGaussianBlur{color-interpolation-filters:sRGB}
  </style>
</head>
<body>
  <div class="wrap">
    <main id="stage" aria-label="DATUM">
      <svg id="svgRoot" viewBox="0 0 1200 300" role="img" aria-label="DATUM">
        <defs>
          <filter id="softBlur"><feGaussianBlur in="SourceGraphic" stdDeviation="6"/></filter>
        </defs>
        <g id="letters" fill="none" stroke="var(--accent)" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"></g>
        <g id="confetti"></g>
      </svg>
    </main>
    <footer class="controls">
      <label>Animation:
        <select id="mode">
          <option value="type">1</option>
          <option value="jump">2</option>
          <option value="sf">3</option>
          <option value="assemble">4</option>
        </select>
      </label>
      <button id="play">▶ Play / Replay</button>
      <span class="note">Pure SVG + Web Animations API. No external scripts.</span>
    </footer>
  </div>

  <script>
    // Five letter paths (100x100 design units each). Swap 'd' if you have custom outlines.
    const PATHS = {
      D: 'M.3105 97.7669V.7469h23.7796c16.7165 0 29.8045 4.3271 39.2737 12.9813 9.4692 8.6542 14.2037 20.5003 14.2037 35.5287 0 9.0132-1.8725 17.0076-5.6175 23.9833-3.745 6.9854-9.246 12.729-16.4837 17.2308-4.1234 2.5904-8.596 4.4435-13.4276 5.5884-4.8413 1.1351-10.8177 1.7076-17.939 1.7076h-23.7796Zm21.1213-20.8108h4.6958c9.343 0 16.6583-2.4546 21.9265-7.3638 5.2682-4.9092 7.9071-11.6909 7.9071-20.3354s-2.6389-15.4553-7.9071-20.4033c-5.2682-4.948-12.5738-7.4317-21.9265-7.4317h-4.6958v55.5342Z',
      A: 'M0 98 48 0H48L96 98H72.912L67 84H29L22 98H0ZM35 68H60L48 38 35 68Z',
      T: 'M1.1254 1.1742 58.7456 1.1742 58.7456 17.6773 40.0305 17.6773 39.5454 98.1942 20.8302 98.1942 20.0928 18.1624 1.1254 18.4147 1.1254 1.1742z',
      U: 'M21.1116 1.1552v51.6534c0 8.2952 1.4456 14.5045 4.3465 18.6278 2.9009 4.1234 7.2862 6.1899 13.1559 6.1899s9.9931-1.921 12.9716-5.7727c2.9785-3.842 4.4726-9.44 4.4726-16.7845V1.1552h19.045v53.9237c0 13.5634-3.3084 24.1386-9.9251 31.7255-6.6168 7.587-15.7949 11.3707-27.5537 11.3707s-21.1116-3.7547-27.7089-11.2737c-6.5974-7.5191-9.896-18.0845-9.896-31.6867V1.1552h21.0824Z',
      M: 'M.5.5.277 97.8288 17.4074 97.8288 17.5 47.5 45.5 77.5 74.5 47.5 74.1788 97.8288 91.9364 97.8288 91.5.5 45.5 50.5.5.5z'
    };

    const root = document.getElementById('svgRoot');
    const group = document.getElementById('letters');
    const confetti = document.getElementById('confetti');
    const modeSel = document.getElementById('mode');
    const playBtn = document.getElementById('play');

    function buildLetters(){
      group.innerHTML = ''; confetti.innerHTML = '';
      const gap = 220, startX = 110, baseY = 150, scale = 2.0;
      const letters = ['D','A','T','U','M'];
      const els = [];
      letters.forEach((key, i) => {
        const outer = document.createElementNS('http://www.w3.org/2000/svg','g'); // 仅负责定位
        outer.setAttribute('transform', `translate(${startX + i*gap}, ${baseY-50}) scale(${scale})`);

        const inner = document.createElementNS('http://www.w3.org/2000/svg','g'); // 专门做动画（CSS transform）
        inner.style.transformOrigin = '0 0'; // 以自身左上为基准，可按需改

        const p = document.createElementNS('http://www.w3.org/2000/svg','path');
        p.setAttribute('d', PATHS[key]);
        // p.setAttribute('vector-effect','non-scaling-stroke');

        inner.appendChild(p);
        outer.appendChild(inner);
        group.appendChild(outer);

        els.push({ outer, inner, p });
      });
      return els;
    }


    function typewriter(els){
      els.forEach(({inner, p}, i) => {
        const len = p.getTotalLength();
        p.style.strokeDasharray = len;
        p.style.strokeDashoffset = len;
        p.style.opacity = 1;

        p.animate(
          [{ strokeDashoffset: len }, { strokeDashoffset: 0 }],
          { duration: 700, delay: i*280, easing: 'cubic-bezier(.22,.61,.36,1)', fill: 'forwards' }
        );

        inner.style.opacity = 0;
        inner.animate(
          [
            { transform: 'translateY(18px)', opacity: 0 },
            { transform: 'translateY(0px)', opacity: 1 }
          ],
          { duration: 420, delay: i*280, easing: 'cubic-bezier(.22,.61,.36,1)', fill: 'forwards' }
        );
      });
    }
    function jumpIn(els){
      els.forEach(({inner}, i) => {
        inner.style.opacity = 0;
        inner.animate(
          [
            { transform: 'translateY(90px) scale(1.25)', opacity: 0 },
            { transform: 'translateY(0px) scale(1)',     opacity: 1 }
          ],
          { duration: 720, delay: i*90, easing: 'cubic-bezier(.17,.89,.32,1.27)', fill: 'forwards' }
        );
      });
    }

    function softFade(els){
      els.forEach(({inner}, i) => {
        // 起始状态
        inner.style.opacity = 0;
        inner.style.filter  = 'none'; // 确保每次重播前都是干净的

        // 动画（注意：只改内层 <g> 的 CSS transform/filter）
        const anim = inner.animate(
          [
            { transform: 'scale(0.96)', filter: 'url(#softBlur)', opacity: 0 },
            { transform: 'scale(1)',     filter: 'none',          opacity: 1 }
          ],
          { duration: 650, delay: i*100, easing: 'cubic-bezier(.25,.46,.45,.94)', fill: 'forwards' }
        );
      });
    }



    function scatterAssemble(els){
      const spread = 180;
      els.forEach(({inner, p}, i) => {
        const rx = (Math.random()-.5)*2*spread;
        const ry = (Math.random()-.5)*2*spread;
        const rdeg = (Math.random()*140 - 70);

        inner.style.opacity = 0;
        const anim = inner.animate(
          [
            { transform: `translate(${rx}px, ${ry}px) rotate(${rdeg}deg) scale(0.7)`, opacity: 0 },
            { transform: `translate(${rx*0.15}px, ${ry*0.15}px) rotate(${rdeg*0.15}deg) scale(1.06)`, opacity: 1, offset: .8 },
            { transform: 'translate(0px, 0px) rotate(0deg) scale(1)', opacity: 1}
          ],
          { duration: 820, delay: i*110, easing: 'cubic-bezier(.19,1,.22,1)', fill: 'forwards' }
        );
      });
    }

    function popBurst(els){
      els.forEach(({g}, i) => {
        g.style.opacity = 0;
        const d = i*130;
        g.animate([{ transform: g.getAttribute('transform') + ' scale(0)', opacity: 0 }, { transform: g.getAttribute('transform'), opacity: 1 }], { duration: 420, delay: d, easing: 'cubic-bezier(.19,1,.22,1)', fill: 'forwards' });
        // simple confetti around the letter center
        setTimeout(() => spawnConfetti(g), d + 110);
      });
    }

    function bboxCenter(el){
      const r = el.getBoundingClientRect();
      return { x: r.left + r.width/2 + window.scrollX, y: r.top + r.height/2 + window.scrollY };
    }

    function spawnConfetti(g){
      const pt = root.createSVGPoint();
      const m = g.getScreenCTM();
      pt.x = 0; pt.y = 0; const c = pt.matrixTransform(m);
      const N = 10;
      for (let i=0;i<N;i++){
        const r = document.createElementNS('http://www.w3.org/2000/svg','rect');
        const ang = (Math.random()*Math.PI*2);
        const dist = 30 + Math.random()*60;
        const sx = c.x, sy = c.y;
        r.setAttribute('x', sx); r.setAttribute('y', sy); r.setAttribute('width', 6); r.setAttribute('height', 6);
        r.setAttribute('fill', Math.random() < .5 ? 'var(--accent)' : 'var(--accent2)');
        confetti.appendChild(r);
        const tx = sx + Math.cos(ang)*dist;
        const ty = sy + Math.sin(ang)*dist;
        r.animate([{ transform: `translate(0,0) rotate(0 ${sx} ${sy})`, opacity: 1 }, { transform: `translate(${tx-sx}px,${ty-sy}px) rotate(${Math.random()*360} ${sx} ${sy})`, opacity: 0 }], { duration: 600, easing: 'cubic-bezier(.22,.61,.36,1)', fill: 'forwards' });
      }
    }

    function meteorIn(els){
      const padX = 600, padY = 400;
      els.forEach(({inner}, i) => {
        const side = Math.floor(Math.random()*4);
        let dx = 0, dy = 0;
        if (side === 0) { dx = -padX - Math.random()*300; dy = (Math.random()-.5)*padY; }
        if (side === 1) { dx =  padX + Math.random()*300; dy = (Math.random()-.5)*padY; }
        if (side === 2) { dy = -padY - Math.random()*250; dx = (Math.random()-.5)*padX; }
        if (side === 3) { dy =  padY + Math.random()*250; dx = (Math.random()-.5)*padX; }

        inner.style.opacity = 0;
        inner.animate(
          [
            { transform: `translate(${dx}px, ${dy}px) rotate(${(Math.random()*120-60)}deg) scale(0.9)`, opacity: 0 },
            { transform: 'translate(0px, 0px) rotate(0deg) scale(1.02)', opacity: 1, offset: 0.86 },
            { transform: 'translate(0px, 0px) rotate(0deg) scale(1)' }
          ],
          { duration: 900, delay: i*90, easing: 'cubic-bezier(.17,.89,.32,1.27)', fill: 'forwards' }
        );
      });
    }

    const modes = {
      type: typewriter,
      jump: jumpIn,
      sf: softFade,
      assemble: scatterAssemble,
    };

    let current = [];
    function play(){
      current = buildLetters();
      const mode = modeSel.value;
      modes[mode](current);
    }

    playBtn.addEventListener('click', play);
    play();
    let to=null; window.addEventListener('resize',()=>{ clearTimeout(to); to=setTimeout(play, 120); });
  </script>
</body>
</html>